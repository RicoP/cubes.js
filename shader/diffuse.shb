uniform mat4 uModelview; 
uniform sampler2D uTexture; 

varying vec2 vTextureuv; 
varying vec3 vNormal; 

vec4 vertex(vec3 aVertex, vec2 aTexture, vec3 aNormal) {
	vNormal    = (uModelview * vec4(aNormal, 0.0)).xyz; 
	vTextureuv = aTexture; 
	return uModelview * vec4(aVertex, 1.0);  
}

vec4 fragment() {
	vec3 normal = normalize(vNormal); 
	vec2 uv     = vTextureuv; 
	vec3 color  = texture2D(uTexture, uv).rgb; 

	return vec4( color + normal, 1.0); 
}
