!function(ja,U){function va(a){var c=new Ja(16);a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c}function Za(a){a||(a=va());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ka(a,c,d){d||(d=a);var f=a[0],i=a[1],b=a[2],v=a[3],V=a[4],e=a[5],g=a[6],h=a[7],k=a[8],l=a[9],j=a[10],t=a[11],
u=a[12],z=a[13],D=a[14],a=a[15],r=c[0],w=c[1],m=c[2],x=c[3];d[0]=r*f+w*V+m*k+x*u;d[1]=r*i+w*e+m*l+x*z;d[2]=r*b+w*g+m*j+x*D;d[3]=r*v+w*h+m*t+x*a;r=c[4];w=c[5];m=c[6];x=c[7];d[4]=r*f+w*V+m*k+x*u;d[5]=r*i+w*e+m*l+x*z;d[6]=r*b+w*g+m*j+x*D;d[7]=r*v+w*h+m*t+x*a;r=c[8];w=c[9];m=c[10];x=c[11];d[8]=r*f+w*V+m*k+x*u;d[9]=r*i+w*e+m*l+x*z;d[10]=r*b+w*g+m*j+x*D;d[11]=r*v+w*h+m*t+x*a;r=c[12];w=c[13];m=c[14];x=c[15];d[12]=r*f+w*V+m*k+x*u;d[13]=r*i+w*e+m*l+x*z;d[14]=r*b+w*g+m*j+x*D;d[15]=r*v+w*h+m*t+x*a;return d}
function la(a,c,d){var f=c[0],i=c[1],c=c[2],b,v,V,e,g,h,k,l,j,t,u,z;if(!d||a===d)return a[12]=a[0]*f+a[4]*i+a[8]*c+a[12],a[13]=a[1]*f+a[5]*i+a[9]*c+a[13],a[14]=a[2]*f+a[6]*i+a[10]*c+a[14],a[15]=a[3]*f+a[7]*i+a[11]*c+a[15],a;b=a[0];v=a[1];V=a[2];e=a[3];g=a[4];h=a[5];k=a[6];l=a[7];j=a[8];t=a[9];u=a[10];z=a[11];d[0]=b;d[1]=v;d[2]=V;d[3]=e;d[4]=g;d[5]=h;d[6]=k;d[7]=l;d[8]=j;d[9]=t;d[10]=u;d[11]=z;d[12]=b*f+g*i+j*c+a[12];d[13]=v*f+h*i+t*c+a[13];d[14]=V*f+k*i+u*c+a[14];d[15]=e*f+l*i+z*c+a[15];return d}
function ma(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];return c}function s(a){var c=new Ja(3);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):c[0]=c[1]=c[2]=0;return c}function Ka(a,c,d){if(!d||a===d)return a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a;d[0]=a[0]+c[0];d[1]=a[1]+c[1];d[2]=a[2]+c[2];return d}function La(a,c){c||(c=a);var d=a[0],f=a[1],i=a[2],b=Math.sqrt(d*d+f*f+i*i);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;if(1===b)return c[0]=d,c[1]=f,c[2]=i,c;b=1/b;c[0]=d*b;c[1]=f*b;c[2]=i*b;return c}function $a(a,c,d){d||(d=a);var f=
a[0],i=a[1],a=a[2],b=c[0],v=c[1],c=c[2];d[0]=i*c-a*v;d[1]=a*b-f*c;d[2]=f*v-i*b;return d}function ab(a,c,d){d||(d=c);var f=c[0],i=c[1],b=c[2],c=a[0],v=a[1],e=a[2],a=a[3],g=a*f+v*b-e*i,h=a*i+e*f-c*b,o=a*b+c*i-v*f,f=-c*f-v*i-e*b;d[0]=g*a+f*-c+h*-e-o*-v;d[1]=h*a+f*-v+o*-c-g*-e;d[2]=o*a+f*-e+g*-v-h*-c;return d}function bb(a,c,d){d||(d=new Ja(4));var a=0.5*a,f=Math.sin(a);d[3]=Math.cos(a);d[0]=f*c[0];d[1]=f*c[1];d[2]=f*c[2];return d}function Ab(a){var c=new Uint32Array(4096),d=362436;c[0]=a;c[1]=a+2654435769;
c[2]=a+2654435769+2654435769;for(a=3;4096>a;a++)c[a]=c[a-3]^c[a-2]^2654435769^a;var f=4095;this.next=function(){var a;f=f+1&4095;a=18782*c[f]+d;d=a>>32;a+=d;a<d&&(a++,d++);a=c[f]=4294967294-a;return 0>a?-a%65535:a%65535}}function Ma(){var a=Z;Ka(J,I,a);var c=J,d=wa,f=da;f||(f=va());var i,b,e,g,h,p,o,k,l=a[0],j=a[1],a=a[2];e=d[0];g=d[1];b=d[2];o=c[0];d=c[1];i=c[2];l===o&&j===d&&a===i?Za(f):(c=l-o,d=j-d,o=a-i,k=1/Math.sqrt(c*c+d*d+o*o),c*=k,d*=k,o*=k,i=g*o-b*d,b=b*c-e*o,e=e*d-g*c,(k=Math.sqrt(i*i+b*
b+e*e))?(k=1/k,i*=k,b*=k,e*=k):e=b=i=0,g=d*e-o*b,h=o*i-c*e,p=c*b-d*i,(k=Math.sqrt(g*g+h*h+p*p))?(k=1/k,g*=k,h*=k,p*=k):p=h=g=0,f[0]=i,f[1]=g,f[2]=c,f[3]=0,f[4]=b,f[5]=h,f[6]=d,f[7]=0,f[8]=e,f[9]=p,f[10]=o,f[11]=0,f[12]=-(i*l+b*j+e*a),f[13]=-(g*l+h*j+p*a),f[14]=-(c*l+d*j+o*a),f[15]=1)}function cb(a){if(na.poke){var c=db(I);xa.tap(a,c)}if(na.drag){var c=2*na.dragDirection.y*Math.PI/W.height,d=bb(2*na.dragDirection.x*Math.PI/W.width,wa);ab(d,I);Ma();d=La($a(wa,I,Z));c=bb(c,d);ab(c,I);La($a(I,d,wa));
Ma()}na.update();xa.tick(a);Bb(Na);var f=oa;pa(f);var a=Q(f,"uModelviewprojection"),c=Q(f,"uTexture"),d=K(f,"aVertex"),f=K(f,"aTextureuv"),b=Z;L(B,Oa);M(d,4,N,!1,$.stride,$.voffset);O(d);M(f,4,N,!1,$.stride,$.toffset);O(f);ea(R,Pa);ya(c,0);ka(fa,da,b);la(b,J);la(b,I);qa(a,!1,b);ra(za,0,$.numVertices);Qa(Na);Cb(Db);c=oa;pa(c);var a=Q(c,"uModelviewprojection"),d=Q(c,"uTexture"),f=K(c,"aVertex"),b=K(c,"aTextureuv"),e=K(c,"aNormal"),c=Z;L(B,Ra);M(f,4,N,!1,S.stride,S.voffset);O(f);-1!==b&&(M(b,4,N,!1,
S.stride,S.toffset),O(b));-1!==e&&(M(e,4,N,!1,S.stride,S.noffset),O(e));d&&(ea(R,Aa),ya(d,0));for(d=0;d!=Sa.length;d++)f=Sa[d],ka(fa,da,c),la(c,f.vector),qa(a,!1,c),ra(za,0,S.numVertices);f=oa;pa(f);a=Q(f,"uModelviewprojection");c=Q(f,"uTexture");d=K(f,"aVertex");f=K(f,"aTextureuv");b=Z;L(B,Ta);M(d,4,N,!1,aa.stride,aa.voffset);O(d);-1!==f&&(M(f,4,N,!1,aa.stride,aa.toffset),O(f));c&&(ea(R,Aa),ya(c,0));ka(fa,da,b);la(b,xa.position);qa(a,!1,b);ra(za,0,aa.numVertices);f=oa;pa(f);a=Q(f,"uModelviewprojection");
c=Q(f,"uTexture");d=K(f,"aVertex");f=K(f,"aTextureuv");b=Z;L(B,Ua);M(d,4,N,!1,ba.stride,ba.voffset);O(d);-1!==f&&(M(f,4,N,!1,ba.stride,ba.toffset),O(f));c&&(ea(R,Aa),ya(c,0));ka(fa,da,b);la(b,Ba);qa(a,!1,b);ra(za,0,ba.numVertices);c=eb;pa(c);a=K(c,"aVertex");c=Q(c,"uModelviewprojection");d=Z;L(B,pathBuffer);M(a,3,N,!1,0,0);O(a);ka(fa,da,d);qa(c,!1,d);for(a=0;a!==C.path.length-1;a++)ra(Eb,a,2);F.requestGameFrame(cb)}function fb(a,c){ea(R,c);Fb(Gb,!0);Hb(R,0,gb,gb,Ib,a);hb(R,Jb,ib);hb(R,Kb,ib)}function jb(a){var c=
Lb();fb(a,c);ea(R,null);return c}var B=34962,Db=256,Na=2929,N=5126,Eb=1,ib=9728,gb=6408,R=3553,Jb=10240,Kb=10241,za=4,Gb=37440,Ib=5121,F={},Mb=["experimental-webgl","webgl","moz-webgl","webkit-3d"];F.createContext=function(a){var c,d;for(c=0;d=Mb[c++];)if(d=a.getContext(d,{alpha:!1,preserveDrawingBuffer:!0}))return d;return null};var Nb=F,kb=function(){for(var a=0;a!==ga;a++)Ca[a]=0,X[a]=0},ga=256,lb=Uint8Array||Array,X=new lb(ga),Ca=new lb(ga);kb();ja.addEventListener("keydown",function(a){a=a.keyCode;
a<ga&&(X[a]=1)},!1);ja.addEventListener("keyup",function(a){a=a.keyCode;a<ga&&(X[a]=0)},!1);U.addEventListener("blur",function(){kb()},!1);Nb.keys={codes:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,
r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,windowKeyLeft:91,windowKeyRight:92,select:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equals:187,comma:188,dash:189,period:190,slash:191,graveAccent:192,openBracket:219,backSlash:220,closeBraket:221,
quote:222},update:function(){for(var a=0;a!==ga;a++)Ca[a]=X[a]},isDown:function(a){return 0!==X[a]},isUp:function(a){return 0===X[a]},wasPressed:function(a){return 0!==X[a]&&0===Ca[a]},wasReleased:function(a){return 0===X[a]&&0!==Ca[a]}};var mb=F,nb,Da,Ea,T;nb=U.requestAnimationFrame||U.webkitRequestAnimationFrame||U.mozRequestAnimationFrame||U.oRequestAnimationFrame||U.msRequestAnimationFrame||function(a){U.setTimeout(a,16)};Da=-1;Ea=0;T={total:0,delta:0,frame:0,reset:function(){Da=-1;T.total=0;
T.frame=0}};mb.requestGameFrame=function(a){nb(function(){try{var c=Date.now();-1===Da&&(Da=Ea=c,T.frame=0);var d=(c-Ea)/1E3;T.delta=d;T.total+=d;a(T);T.frame++;Ea=c;mb.keys.update()}catch(b){c=b.message||b,ja.body.innerHTML=c+"",alert(c)}})};var ha=F,Ob=/[\t\r\n ]+/g;ha.obj={};ha.obj.parse=function(a){for(var a=a.split("\n"),c="",d=0,b=[],i=[],e=[],g=[],h=[],q=[],p=0,o={v:function(a){if(!a||3!=a.length)throw Error("Can't accept Vertic without 3 components. LINE:"+c);b.push(Number(a[0]),Number(a[1]),
Number(a[2]))},vn:function(a){if(!a||3!=a.length)throw Error("Can't accept Normal without 3 components. LINE:"+d);i.push(Number(a[0]),Number(a[1]),Number(a[2]))},vt:function(a){if(!a||2>a.length)throw Error("Can't accept Texture with less than 2 components. LINE:"+d);e.push(Number(a[0]),Number(a[1]))},f:function r(a){if(!a||3>a.length)throw Error("Can't accept Face with less than 3 components. LINE:"+d);if(3<a.length)for(var c=a.length-1;1!==c;c--)r([a[0],a[c-1],a[c]]);else{p++;for(var b=0;3!==b;b++){var c=
a[b].split("/"),f=parseInt(c[0],10)-1,i=parseInt(c[1],10)-1,c=parseInt(c[2],10)-1;g.push(f);isNaN(i)||q.push(i);isNaN(c)||h.push(c)}}}},d=0;d!=a.length;){var c=a[d++].trim(),k=c.split(Ob),l=k.shift();if(l in o)o[l](k)}a=0;if(0!==e.length||0!==q.length)if(a|=2,g.length!==q.length)throw Error("Texture indice don't match Vertic indice.");if(0!==i.length||0!==h.length)if(a|=1,g.length!==h.length)throw Error("Normal indice don't match Vertic indice.");l=k=o=0;switch(a){case 0:l=4;break;case 2:l=6;o=16;
break;case 1:l=8;k=16;break;case 3:l=10;o=16;k=24;break;default:throw Error("Schema broken.");}for(var j=new Float32Array(3*p*l),t=0,u=0,z=u=u=0;z!=g.length;z++)if(u=3*g[z],j[t++]=b[u++],j[t++]=b[u++],j[t++]=b[u],j[t++]=1,a&2&&(u=2*q[z],j[t++]=e[u++],j[t++]=e[u]),a&1)u=3*h[z],j[t++]=i[u++],j[t++]=i[u++],j[t++]=i[u],j[t++]=0;return{stride:4*l,schema:a,voffset:0,toffset:o,noffset:k,rawData:j,numVertices:3*p}};ha.obj.SCHEMA_V=0;ha.obj.SCHEMA_VN=1;ha.obj.SCHEMA_VT=2;ha.obj.SCHEMA_VTN=3;var Va=F,ob=function(a,
c,d,b){var i=0,e=!1,g=new XMLHttpRequest;g.onreadystatechange=function(){if(!e){if(2===g.readyState||3===g.readyState){var h=g.getResponseHeader("content-type"),h=h.toLowerCase();i="application/json"===h?2:"text/html"===h?7:-1!==h.indexOf("javascript")?3:-1!==h.indexOf("xml")?4:-1!==h.indexOf("image")?5:1;c.toLowerCase().lastIndexOf(".json")+5===c.length?i=2:c.toLowerCase().lastIndexOf(".obj")+4===c.length&&(i=6);if(5===i){e=!0;g.abort();var q=new Image;q.onload=function(){d(a,q)};q.onerror=function(){b(c,
"Loading image failed.")};q.src=c;return}}if(4===g.readyState)if(h=g.status,200<=h&&299>=h||304===h||0===h)if(4===i)d(a,g.responseXML);else if(2===i)try{d(a,JSON.parse(g.responseText))}catch(p){b(c,p)}else if(6===i)try{d(a,Va.obj.parse(g.responseText))}catch(o){b(c,o)}else d(a,g.responseText);else b(c,h||0)}};g.open("GET",c,!0);g.send(null)},Fa=function(){};Va.loadmanager={};Va.loadmanager.loadFiles=function(a){if(!a)throw Error("Passed nothing in loadFiles");var c=a.files||{},d=a.update||Fa,b=a.finished||
Fa,i=a.error||Fa,e=0,g=0,h=Object.create(null),q=function(a,c){g++;h[a]=c;d(a,g/e);g===e&&b(h)},p=function(a,c){p=q=Fa;i(a,c)};if(c instanceof Array)for(var e=c.length,a=0,o;o=c[a++];)ob(o,o,q,p);else{o=Object.keys(c);for(var e=o.length,a=0,k;k=o[a++];)c.hasOwnProperty(k)&&ob(k,c[k],q,p)}};var pb=F;pb.shader={};pb.shader.compileProgram=function(a,c){for(var d=["#define VERTEX\n","#define FRAGMENT\n"],b=[a.createShader(a.VERTEX_SHADER),a.createShader(a.FRAGMENT_SHADER)],i=a.createProgram(),e=null,
g="",h=0;h!=d.length;h++){e=b[h];a.shaderSource(e,d[h]+"#line 0\n"+c);a.compileShader(e);if(g=a.getShaderInfoLog(e))throw Error(g);a.attachShader(i,e)}a.linkProgram(i);(g=a.getProgramInfoLog(i))&&console.error(g);return i};var G={},qb={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var a=0;4096>a;a++)this.encLookup[a]=this.chars[a>>6]+this.chars[a&63]},Encode:function(a){for(var c=a.length,b="",f=0;2<c;)n=a[f]<<16|a[f+1]<<8|a[f+2],b+=this.encLookup[n>>
12]+this.encLookup[n&4095],c-=3,f+=3;if(0<c){var i=(a[f]&252)>>2,e=(a[f]&3)<<4;1<c&&(e|=(a[++f]&240)>>4);b+=this.chars[i];b+=this.chars[e];2==c&&(i=(a[f++]&15)<<2,i|=(a[f]&192)>>6,b+=this.chars[i]);1==c&&(b+="=");b+="="}return b}};qb.Init();var Pb=function(a){function c(a){return[a&255,a>>8&255,a>>16&255,a>>24&255]}this.data=[];this.wav=[];this.dataURI="";this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8E3,
byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0};this.Make=function(a){a instanceof Array&&(this.data=a);this.header.byteRate=this.header.sampleRate*this.header.numChannels*this.header.bitsPerSample>>3;this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3;this.header.subChunk2Size=this.data.length;this.header.chunkSize=36+this.header.subChunk2Size;this.wav=this.header.chunkId.concat(c(this.header.chunkSize),this.header.format,this.header.subChunk1Id,
c(this.header.subChunk1Size),[this.header.audioFormat&255,this.header.audioFormat>>8&255],[this.header.numChannels&255,this.header.numChannels>>8&255],c(this.header.sampleRate),c(this.header.byteRate),[this.header.blockAlign&255,this.header.blockAlign>>8&255],[this.header.bitsPerSample&255,this.header.bitsPerSample>>8&255],this.header.subChunk2Id,c(this.header.subChunk2Size),this.data);this.dataURI="data:audio/wav;base64,"+qb.Encode(this.wav)};a instanceof Array&&this.Make(a)};"undefined"!=typeof G&&
(G.RIFFWAVE=Pb);!0;var A=function(a){var a=a||{},c;for(c in rb)this[c]=a.hasOwnProperty(c)?a[c]:rb[c]},ca=function(a){return a*a},Y=function(a){return a*a*a},H=function(){this.oldParams=true;this.wave_type=P;this.p_env_attack=0;this.p_env_sustain=0.3;this.p_env_punch=0;this.p_env_decay=0.4;this.p_base_freq=0.3;this.p_pha_ramp=this.p_pha_offset=this.p_repeat_speed=this.p_duty_ramp=this.p_duty=this.p_arp_speed=this.p_arp_mod=this.p_vib_speed=this.p_vib_strength=this.p_freq_dramp=this.p_freq_ramp=this.p_freq_limit=
0;this.p_lpf_freq=1;this.p_hpf_ramp=this.p_hpf_freq=this.p_lpf_resonance=this.p_lpf_ramp=0;this.sound_vol=0.5;this.sample_rate=44100;this.sample_size=8},b=function(a){return Math.random()*a},h=function(a,c){return Math.random()*(c-a)+a},e=function(a){return Math.floor(Math.random()*(a+1))},Ga=function(a){a.oldParams?this.initFromUI(a):this.init(a)},P=0,rb={shape:P,attack:0,sustain:0.2,punch:0,decay:0.2,frequency:1E3,frequencyMin:0,frequencySlide:0,frequencySlideSlide:0,vibratoDepth:0,vibratoRate:10,
arpeggioFactor:1,arpeggioDelay:0.1,dutyCycle:0.5,dutyCycleSweep:0,retriggerRate:0,flangerOffset:0,flangerSweep:0,lowPassFrequency:44100,lowPassSweep:1,lowPassResonance:0.5,highPassFrequency:0,highPassSweep:0,gain:-10,sampleRate:44100,sampleSize:8},sa=Math.pow;A.prototype.translate=function(a){function c(a){return a/(1-a)}this.shape=a.wave_type;this.attack=a.p_env_attack*a.p_env_attack*1E5/44100;this.sustain=a.p_env_sustain*a.p_env_sustain*1E5/44100;this.punch=a.p_env_punch;this.decay=a.p_env_decay*
a.p_env_decay*1E5/44100;this.frequency=3528*(a.p_base_freq*a.p_base_freq+0.001);this.frequencyMin=a.p_freq_limit>0?3528*(a.p_freq_limit*a.p_freq_limit+0.001):0;this.enableFrequencyCutoff=a.p_freq_limit>0;var b=1-Y(a.p_freq_ramp)/100;this.frequencySlide=44100*(Math.log(b)/Math.log(0.5));this.frequencySlideSlide=-Y(a.p_freq_dramp)/1E6*44100*sa(2,44101/44100);this.vibratoRate=6890.625*a.p_vib_speed*a.p_vib_speed/100;this.vibratoDepth=a.p_vib_strength/2;this.arpeggioFactor=1/(a.p_arp_mod>=0?1-a.p_arp_mod*
a.p_arp_mod*0.9:1+a.p_arp_mod*a.p_arp_mod*10);this.arpeggioDelay=a.p_arp_speed===1?0:Math.floor((1-a.p_arp_speed)*(1-a.p_arp_speed)*2E4+32)/44100;this.dutyCycle=(1-a.p_duty)/2;this.dutyCycleSweep=352800*-a.p_duty_ramp/2E4;this.retriggerRate=44100/(a.p_repeat_speed===0?0:Math.floor((1-a.p_repeat_speed)*(1-a.p_repeat_speed)*2E4)+32);this.flangerOffset=(a.p_pha_offset<0?-1:1)*(a.p_pha_offset*a.p_pha_offset)*1020/44100;this.flangerSweep=(a.p_pha_ramp<0?-1:1)*a.p_pha_ramp*a.p_pha_ramp;this.enableLowPassFilter=
a.p_lpf_freq!=1;this.lowPassFrequency=a.p_lpf_freq===1?44100:Math.round(352800*c(Y(a.p_lpf_freq)/10));this.lowPassSweep=sa(1+a.p_lpf_ramp/1E4,44100);this.lowPassResonance=1-5/(1+a.p_lpf_resonance*a.p_lpf_resonance*20)/9;this.highPassFrequency=Math.round(352800*c(a.p_hpf_freq*a.p_hpf_freq/10));this.highPassSweep=sa(1+a.p_hpf_ramp*3E-4,44100);b=ca(Math.exp(a.sound_vol)-1);this.gain=10*(Math.log(b)/Math.log(10));this.sampleRate=a.sample_rate;this.sampleSize=a.sample_size;return this};H.prototype.pickupCoin=
function(){this.p_base_freq=0.4+b(0.5);this.p_env_attack=0;this.p_env_sustain=b(0.1);this.p_env_decay=0.1+b(0.4);this.p_env_punch=0.3+b(0.3);if(e(1)){this.p_arp_speed=0.5+b(0.2);this.p_arp_mod=0.2+b(0.4)}return this};A.prototype.pickupCoin=function(){this.frequency=h(568,2861);this.attack=0;this.sustain=b(0.227);this.decay=h(0.227,0.567);this.punch=h(0.3,0.6);if(e(1)){this.arpeggioFactor=h(1.037,1.479);this.arpeggioDelay=h(0.042,0.114)}return this};H.prototype.laserShoot=function(){this.wave_type=
e(2);if(this.wave_type===2&&e(1))this.wave_type=e(1);if(e(2)===0){this.p_base_freq=0.3+b(0.6);this.p_freq_limit=b(0.1);this.p_freq_ramp=-0.35-b(0.3)}else{this.p_base_freq=0.5+b(0.5);this.p_freq_limit=this.p_base_freq-0.2-b(0.6);if(this.p_freq_limit<0.2)this.p_freq_limit=0.2;this.p_freq_ramp=-0.15-b(0.2)}if(this.wave_type===1)this.p_duty=1;if(e(1)){this.p_duty=b(0.5);this.p_duty_ramp=b(0.2)}else{this.p_duty=0.4+b(0.5);this.p_duty_ramp=-b(0.7)}this.p_env_attack=0;this.p_env_sustain=0.1+b(0.2);this.p_env_decay=
b(0.4);if(e(1))this.p_env_punch=b(0.3);if(e(2)===0){this.p_pha_offset=b(0.2);this.p_pha_ramp=-b(0.2)}this.p_hpf_freq=b(0.3);return this};A.prototype.laserShoot=function(){this.shape=e(2);if(this.shape===2&&e(1))this.shape=e(1);if(e(2)===0){this.frequency=h(321,2861);this.frequencyMin=b(38.8);this.frequencySlide=h(-27.3,-174.5)}else{this.frequency=h(321,3532);this.frequencyMin=h(144,2/3*this.frequency);this.frequencySlide=h(-2.15,-27.27)}if(this.shape===1)this.dutyCycle=0;if(e(1)){this.dutyCycle=h(0.25,
0.5);this.dutyCycleSweep=h(0,-3.528)}else{this.dutyCycle=h(0.05,0.3);this.dutyCycleSweep=b(12.35)}this.attack=0;this.sustain=h(0.02,0.2);this.decay=b(0.36);if(e(1))this.punch=b(0.3);if(e(2)===0){this.flangerOffset=b(0.001);this.flangerSweep=-b(0.04)}if(e(1))this.highPassFrequency=b(3204);return this};H.prototype.explosion=function(){this.wave_type=3;if(e(1)){this.p_base_freq=ca(0.1+b(0.4));this.p_freq_ramp=-0.1+b(0.4)}else{this.p_base_freq=ca(0.2+b(0.7));this.p_freq_ramp=-0.2-b(0.2)}if(e(4)===0)this.p_freq_ramp=
0;if(e(2)===0)this.p_repeat_speed=0.3+b(0.5);this.p_env_attack=0;this.p_env_sustain=0.1+b(0.3);this.p_env_decay=b(0.5);if(e(1)){this.p_pha_offset=-0.3+b(0.9);this.p_pha_ramp=-b(0.3)}this.p_env_punch=0.2+b(0.6);if(e(1)){this.p_vib_strength=b(0.7);this.p_vib_speed=b(0.6)}if(e(2)===0){this.p_arp_speed=0.6+b(0.3);this.p_arp_mod=0.8-b(1.6)}return this};A.prototype.explosion=function(){this.shape=3;if(e(1)){this.frequency=h(4,224);this.frequencySlide=h(-0.623,17.2)}else{this.frequency=h(9,2318);this.frequencySlide=
h(-5.1,-40.7)}if(e(4)===0)this.frequencySlide=0;if(e(2)===0)this.retriggerRate=h(4.5,53);this.attack=0;this.sustain=h(0.0227,0.363);this.decay=b(0.567);if(e(1)){this.flangerOffset=h(-0.0021,0.0083);this.flangerSweep=-b(0.09)}this.punch=0.2+b(0.6);if(e(1)){this.vibratoDepth=b(0.35);this.vibratoRate=b(24.8)}if(e(2)===0){this.arpeggioFactor=h(0.135,2.358);this.arpeggioDelay=h(0.00526,0.0733)}return this};H.prototype.powerUp=function(){if(e(1))this.p_duty=this.wave_type=1;else this.p_duty=b(0.6);this.p_base_freq=
0.2+b(0.3);if(e(1)){this.p_freq_ramp=0.1+b(0.4);this.p_repeat_speed=0.4+b(0.4)}else{this.p_freq_ramp=0.05+b(0.2);if(e(1)){this.p_vib_strength=b(0.7);this.p_vib_speed=b(0.6)}}this.p_env_attack=0;this.p_env_sustain=b(0.4);this.p_env_decay=0.1+b(0.4);return this};A.prototype.powerUp=function(){if(e(1)){this.shape=1;this.dutyCycle=0}else this.dutyCycle=h(0.2,0.5);this.frequency=h(145,886);if(e(1)){this.frequencySlide=h(0.636,79.6);this.retriggerRate=h(6,53)}else{this.frequencySlide=h(0.0795,9.94);if(e(1)){this.vibratoDepth=
b(0.35);this.vibratoRate=b(24.8)}}this.attack=0;this.sustain=b(0.363);this.decay=h(0.023,0.57);return this};H.prototype.hitHurt=function(){this.wave_type=e(2);if(this.wave_type===2)this.wave_type=3;if(this.wave_type===P)this.p_duty=b(0.6);if(this.wave_type===1)this.p_duty=1;this.p_base_freq=0.2+b(0.6);this.p_freq_ramp=-0.3-b(0.4);this.p_env_attack=0;this.p_env_sustain=b(0.1);this.p_env_decay=0.1+b(0.2);if(e(1))this.p_hpf_freq=b(0.3);return this};A.prototype.hitHurt=function(){this.shape=e(2);if(this.shape===
2)this.shape=3;if(this.shape===P)this.dutyCycle=h(0.2,0.5);if(this.shape===1)this.dutyCycle=0;this.frequency=h(145,2261);this.frequencySlide=h(-17.2,-217.9);this.attack=0;this.sustain=b(0.023);this.decay=h(0.023,0.2);if(e(1))this.highPassFrequency=b(3204);return this};H.prototype.jump=function(){this.wave_type=P;this.p_duty=b(0.6);this.p_base_freq=0.3+b(0.3);this.p_freq_ramp=0.1+b(0.2);this.p_env_attack=0;this.p_env_sustain=0.1+b(0.3);this.p_env_decay=0.1+b(0.2);if(e(1))this.p_hpf_freq=b(0.3);if(e(1))this.p_lpf_freq=
1-b(0.6);return this};A.prototype.jump=function(){this.shape=P;this.dutyCycle=h(0.2,0.5);this.frequency=h(321,1274);this.frequencySlide=h(0.64,17.2);this.attack=0;this.sustain=h(0.023,0.36);this.decay=h(0.023,0.2);if(e(1))this.highPassFrequency=b(3204);if(e(1))this.lowPassFrequency=h(2272,44100);return this};H.prototype.blipSelect=function(){this.wave_type=e(1);this.p_duty=this.wave_type===P?b(0.6):1;this.p_base_freq=0.2+b(0.4);this.p_env_attack=0;this.p_env_sustain=0.1+b(0.1);this.p_env_decay=b(0.2);
this.p_hpf_freq=0.1;return this};A.prototype.blipSelect=function(){this.shape=e(1);this.dutyCycle=this.shape===P?h(0.2,0.5):0;this.frequency=h(145,1274);this.attack=0;this.sustain=h(0.023,0.09);this.decay=b(0.09);this.highPassFrequency=353;return this};H.prototype.mutate=function(){if(e(1))this.p_base_freq=this.p_base_freq+(b(0.1)-0.05);if(e(1))this.p_freq_ramp=this.p_freq_ramp+(b(0.1)-0.05);if(e(1))this.p_freq_dramp=this.p_freq_dramp+(b(0.1)-0.05);if(e(1))this.p_duty=this.p_duty+(b(0.1)-0.05);if(e(1))this.p_duty_ramp=
this.p_duty_ramp+(b(0.1)-0.05);if(e(1))this.p_vib_strength=this.p_vib_strength+(b(0.1)-0.05);if(e(1))this.p_vib_speed=this.p_vib_speed+(b(0.1)-0.05);if(e(1))this.p_vib_delay=this.p_vib_delay+(b(0.1)-0.05);if(e(1))this.p_env_attack=this.p_env_attack+(b(0.1)-0.05);if(e(1))this.p_env_sustain=this.p_env_sustain+(b(0.1)-0.05);if(e(1))this.p_env_decay=this.p_env_decay+(b(0.1)-0.05);if(e(1))this.p_env_punch=this.p_env_punch+(b(0.1)-0.05);if(e(1))this.p_lpf_resonance=this.p_lpf_resonance+(b(0.1)-0.05);if(e(1))this.p_lpf_freq=
this.p_lpf_freq+(b(0.1)-0.05);if(e(1))this.p_lpf_ramp=this.p_lpf_ramp+(b(0.1)-0.05);if(e(1))this.p_hpf_freq=this.p_hpf_freq+(b(0.1)-0.05);if(e(1))this.p_hpf_ramp=this.p_hpf_ramp+(b(0.1)-0.05);if(e(1))this.p_pha_offset=this.p_pha_offset+(b(0.1)-0.05);if(e(1))this.p_pha_ramp=this.p_pha_ramp+(b(0.1)-0.05);if(e(1))this.p_repeat_speed=this.p_repeat_speed+(b(0.1)-0.05);if(e(1))this.p_arp_speed=this.p_arp_speed+(b(0.1)-0.05);if(e(1))this.p_arp_mod=this.p_arp_mod+(b(0.1)-0.05)};H.prototype.random=function(){this.p_base_freq=
e(1)?Y(b(2)-1)+0.5:ca(b(1));this.p_freq_limit=0;this.p_freq_ramp=Math.pow(b(2)-1,5);if(this.p_base_freq>0.7&&this.p_freq_ramp>0.2)this.p_freq_ramp=-this.p_freq_ramp;if(this.p_base_freq<0.2&&this.p_freq_ramp<-0.05)this.p_freq_ramp=-this.p_freq_ramp;this.p_freq_dramp=Math.pow(b(2)-1,3);this.p_duty=b(2)-1;this.p_duty_ramp=Math.pow(b(2)-1,3);this.p_vib_strength=Math.pow(b(2)-1,3);this.p_vib_speed=h(-1,1);this.p_env_attack=Y(h(-1,1));this.p_env_sustain=ca(h(-1,1));this.p_env_decay=h(-1,1);this.p_env_punch=
Math.pow(b(0.8),2);if(this.p_env_attack+this.p_env_sustain+this.p_env_decay<0.2){this.p_env_sustain=this.p_env_sustain+(0.2+b(0.3));this.p_env_decay=this.p_env_decay+(0.2+b(0.3))}this.p_lpf_resonance=h(-1,1);this.p_lpf_freq=1-Math.pow(b(1),3);this.p_lpf_ramp=Math.pow(b(2)-1,3);if(this.p_lpf_freq<0.1&&this.p_lpf_ramp<-0.05)this.p_lpf_ramp=-this.p_lpf_ramp;this.p_hpf_freq=Math.pow(b(1),5);this.p_hpf_ramp=Math.pow(b(2)-1,5);this.p_pha_offset=Math.pow(b(2)-1,3);this.p_pha_ramp=Math.pow(b(2)-1,3);this.p_repeat_speed=
b(2)-1;this.p_arp_speed=b(2)-1;this.p_arp_mod=b(2)-1;return this};A.prototype.random=function(){this.frequency=e(1)?h(885.5,7941.5):h(3.5,3532);this.frequencySlide=h(-633,639);if(this.frequency>1732&&this.frequencySlide>5)this.frequencySlide=-this.frequencySlide;if(this.frequency<145&&this.frequencySlide<-0.088)this.frequencySlide=-this.frequencySlide;this.frequencySlideSlide=h(-0.88,0.88);this.dutyCycle=b(1);this.dudyCycleSweep=h(-17.64,17.64);this.vibratoDepth=h(-0.5,0.5);this.vibratoRate=h(0,69);
this.attack=Y(b(1))*2.26;this.sustain=ca(b(1))*2.26+0.09;this.decay=b(1)*2.26;this.punch=ca(b(1))*0.64;if(this.attack+this.sustain+this.decay<0.45){this.sustain=this.sustain+h(0.5,1.25);this.decay=this.decay+h(0.5,1.25)}this.lowPassResonance=h(0.444,0.97);this.lowPassFrequency=b(39200);this.lowPassSweep=h(0.012,82);if(this.lowPassFrequency<35&&this.lowPassSweep<0.802)this.lowPassSweep=1-this.lowPassSweep;this.highPassFrequency=39200*sa(b(1),5);this.highPassSweep=555718*sa(h(-1,1),5);this.flangerOffset=
0.023*Y(b(2)-1);this.flangerSweep=Y(b(2)-1);this.retriggerRate=b(1378);this.arpeggioDelay=b(1.81);this.arpeggioFactor=h(0.09,10);return this};H.prototype.tone=function(){this.wave_type=2;this.p_base_freq=0.35173364;this.p_env_attack=0;this.p_env_sustain=0.6641;this.p_env_punch=this.p_env_decay=0;return this};Ga.prototype.initFromUI=function(a){this.initForRepeat=function(){this.elapsedSinceRepeat=0;this.period=100/(a.p_base_freq*a.p_base_freq+0.001);this.periodMax=100/(a.p_freq_limit*a.p_freq_limit+
0.001);this.enableFrequencyCutoff=a.p_freq_limit>0;this.periodMult=1-Math.pow(a.p_freq_ramp,3)*0.01;this.periodMultSlide=-Math.pow(a.p_freq_dramp,3)*1E-6;this.dutyCycle=0.5-a.p_duty*0.5;this.dutyCycleSlide=-a.p_duty_ramp*5E-5;this.arpeggioMultiplier=a.p_arp_mod>=0?1-Math.pow(a.p_arp_mod,2)*0.9:1+Math.pow(a.p_arp_mod,2)*10;this.arpeggioTime=Math.floor(Math.pow(1-a.p_arp_speed,2)*2E4+32);if(a.p_arp_speed===1)this.arpeggioTime=0};this.initForRepeat();this.waveShape=parseInt(a.wave_type);this.fltw=Math.pow(a.p_lpf_freq,
3)*0.1;this.enableLowPassFilter=a.p_lpf_freq!=1;this.fltw_d=1+a.p_lpf_ramp*1E-4;this.fltdmp=5/(1+Math.pow(a.p_lpf_resonance,2)*20)*(0.01+this.fltw);if(this.fltdmp>0.8)this.fltdmp=0.8;this.flthp=Math.pow(a.p_hpf_freq,2)*0.1;this.flthp_d=1+a.p_hpf_ramp*3E-4;this.vibratoSpeed=Math.pow(a.p_vib_speed,2)*0.01;this.vibratoAmplitude=a.p_vib_strength*0.5;this.envelopeLength=[Math.floor(a.p_env_attack*a.p_env_attack*1E5),Math.floor(a.p_env_sustain*a.p_env_sustain*1E5),Math.floor(a.p_env_decay*a.p_env_decay*
1E5)];this.envelopePunch=a.p_env_punch;this.flangerOffset=Math.pow(a.p_pha_offset,2)*1020;if(a.p_pha_offset<0)this.flangerOffset=-this.flangerOffset;this.flangerOffsetSlide=Math.pow(a.p_pha_ramp,2)*1;if(a.p_pha_ramp<0)this.flangerOffsetSlide=-this.flangerOffsetSlide;this.repeatTime=Math.floor(Math.pow(1-a.p_repeat_speed,2)*2E4+32);if(a.p_repeat_speed===0)this.repeatTime=0;this.gain=Math.exp(a.sound_vol)-1;this.sampleRate=a.sample_rate;this.bitsPerChannel=a.sample_size;for(var c in this)typeof this[c]!==
"function"&&console.log(c,this[c])};Ga.prototype.init=function(a){this.initForRepeat=function(){this.elapsedSinceRepeat=0;this.period=352800/a.frequency;this.periodMax=352800/a.frequencyMin;this.enableFrequencyCutoff=a.frequencyMin>0;this.periodMult=Math.pow(0.5,a.frequencySlide/44100);this.periodMultSlide=a.frequencySlideSlide*Math.pow(2,-44101/44100)/44100;this.dutyCycle=a.dutyCycle;this.dutyCycleSlide=a.dutyCycleSweep/352800;this.arpeggioMultiplier=1/a.arpeggioFactor;this.arpeggioTime=a.arpeggioDelay*
44100};this.initForRepeat();this.waveShape=a.shape;this.fltw=a.lowPassFrequency/(352800+a.lowPassFrequency);this.enableLowPassFilter=a.lowPassFrequency<44100;this.fltw_d=Math.pow(a.lowPassSweep,1/44100);this.fltdmp=(1-a.lowPassResonance)*9*(0.01+this.fltw);this.flthp=a.highPassFrequency/(352800+a.highPassFrequency);this.flthp_d=Math.pow(a.highPassSweep,1/44100);this.vibratoSpeed=a.vibratoRate*64/44100/10;this.vibratoAmplitude=a.vibratoDepth;this.envelopeLength=[Math.floor(a.attack*44100),Math.floor(a.sustain*
44100),Math.floor(a.decay*44100)];this.envelopePunch=a.punch;this.flangerOffset=a.flangerOffset*44100;this.flangerOffsetSlide=a.flangerSweep;this.repeatTime=a.retriggerRate?1/(44100*a.retriggerRate):0;this.gain=Math.sqrt(Math.pow(10,a.gain/10));this.sampleRate=a.sampleRate;this.bitsPerChannel=a.sampleSize};Ga.prototype.generate=function(){for(var a=0,c=0,b=0,f=Array(32),i=0;i<32;++i)f[i]=Math.random()*2-1;for(var e=0,g=0,h=0,q=0,p=0,o=Array(1024),i=0;i<1024;++i)o[i]=0;for(var k=0,l=[],j=0,t=0,u=Math.floor(44100/
this.sampleRate),z=0;;++z){this.repeatTime!=0&&++this.elapsedSinceRepeat>=this.repeatTime&&this.initForRepeat();if(this.arpeggioTime!=0&&z>=this.arpeggioTime){this.arpeggioTime=0;this.period=this.period*this.arpeggioMultiplier}this.periodMult=this.periodMult+this.periodMultSlide;this.period=this.period*this.periodMult;if(this.period>this.periodMax){this.period=this.periodMax;if(this.enableFrequencyCutoff)break}var D=this.period;if(this.vibratoAmplitude>0){h=h+this.vibratoSpeed;D=this.period*(1+Math.sin(h)*
this.vibratoAmplitude)}D=Math.floor(D);D<8&&(D=8);this.dutyCycle=this.dutyCycle+this.dutyCycleSlide;if(this.dutyCycle<0)this.dutyCycle=0;if(this.dutyCycle>0.5)this.dutyCycle=0.5;if(++g>this.envelopeLength[e]){g=0;if(++e>2)break}var r;r=g/this.envelopeLength[e];r=e===0?r:e===1?1+(1-r)*2*this.envelopePunch:1-r;this.flangerOffset=this.flangerOffset+this.flangerOffsetSlide;var w=Math.abs(Math.floor(this.flangerOffset));w>1023&&(w=1023);if(this.flthp_d!=0){this.flthp=this.flthp*this.flthp_d;if(this.flthp<
1E-5)this.flthp=1E-5;if(this.flthp>0.1)this.flthp=0.1}for(var m=0,x=0;x<8;++x){i=0;q++;if(q>=D){q=q%D;if(this.waveShape===3)for(i=0;i<32;++i)f[i]=Math.random()*2-1}i=q/D;if(this.waveShape===P)i=i<this.dutyCycle?0.5:-0.5;else if(this.waveShape===1)i=i<this.dutyCycle?-1+2*i/this.dutyCycle:1-2*(i-this.dutyCycle)/(1-this.dutyCycle);else if(this.waveShape===2)i=Math.sin(i*2*Math.PI);else if(this.waveShape===3)i=f[Math.floor(q*32/D)];else throw"ERROR: Bad wave type: "+this.waveShape;var s=a;this.fltw=this.fltw*
this.fltw_d;if(this.fltw<0)this.fltw=0;if(this.fltw>0.1)this.fltw=0.1;if(this.enableLowPassFilter){c=c+(i-a)*this.fltw;c=c-c*this.fltdmp}else{a=i;c=0}a=a+c;b=b+(a-s);i=b=b-b*this.flthp;o[p&1023]=i;i=i+o[p-w+1024&1023];p=p+1&1023;m=m+i*r}j=j+m;if(++t>=u){t=0;m=j/u;j=0;m=m/8*1;m=m*this.gain;if(this.bitsPerChannel===8){m=Math.floor((m+1)*128);if(m>255){m=255;++k}else if(m<0){m=0;++k}l.push(m)}else{m=Math.floor(m*32768);if(m>=32768){m=32767;++k}else if(m<-32768){m=-32768;++k}l.push(m&255);l.push(m>>8&
255)}}}a=new Qb;a.header.sampleRate=this.sampleRate;a.header.bitsPerSample=this.bitsPerChannel;a.Make(l);a.clipping=k;return a};A.prototype.tone=function(){this.shape=2;this.frequency=440;this.attack=0;this.sustain=1;this.decay=0;return this};for(var sb="pickupCoin laserShoot explosion powerUp hitHurt jump blipSelect random tone".split(" "),Wa=0;Wa<sb.length;++Wa)(function(a){A.prototype[a]||(A.prototype[a]=function(){return this.translate((new H)[a]())})})(sb[Wa]);if("undefined"!==typeof G){var Qb=
G.RIFFWAVE;G.Params=H;G.Knobs=A;G.SoundEffect=Ga;G.SQUARE=P;G.SAWTOOTH=1;G.SINE=2;G.NOISE=3}!0;var Ja=Float32Array,tb,Rb=function(a,c){var b=0,f=s(),i=s(),e=0;this.tick=function(c){switch(b){case 1:var g=a.position,h;h=c.delta*8;var p=ub;if(!p||f===p){f[0]=f[0]*h;f[1]=f[1]*h;f[2]=f[2]*h;h=f}else{p[0]=f[0]*h;p[1]=f[1]*h;p[2]=f[2]*h;h=p}Ka(g,h);e=e+c.delta*8;if(e>=1){ma(Ka(i,f,ub),a.position);e=b=0;this.tap(c,f)}}};this.tap=function(h,g){switch(b){case 0:var q=Math.round(a.position[0]+g[0]),p=Math.round(a.position[1]+
g[1]),o=Math.round(a.position[2]+g[2]);if(c.getObject(q,p,o)===0){ma(g,f);ma(a.position,i);e=0;b=1}}}},ub=s();tb=function(a,c){this.position=s([a.x,a.y,a.z]);var b=new Rb(this,c);this.tap=function(a,c){b.tap(a,c)};this.tick=function(a){b.tick(a,c)}};var ia=function(a,c){this.x=a;this.y=c;this.toString=function(){return"["+a+", "+c+"]"}};!0;var S,aa,xa,$,ba,Ua,oa,eb,Ra,Ta,Oa,C,E=new function(){function a(c,b,d){if(b<0)switch(c){case 0:return a(1,d,-b-1);case 1:return a(5,-b-1,15-d);case 2:return a(1,
b+16,d);case 3:return a(2,b+16,d);case 4:return a(1,15-d,16+b);case 5:return a(1,-b-1,15-d);default:throw new RangeError;}if(d<0)switch(c){case 0:return a(5,b,16+d);case 1:return a(0,-d-1,b);case 2:return a(0,b,16+d);case 3:return a(0,16+d,15-b);case 4:return a(2,b,16+d);case 5:return a(4,b,16+d);default:throw new RangeError;}if(b>=16)switch(c){case 0:return a(3,15-d,b-16);case 1:return a(2,b-16,d);case 2:return a(3,b-16,d);case 3:return a(5,31-b,15-d);case 4:return a(3,d,31-b);case 5:return a(3,
31-b,15-d);default:throw new RangeError;}if(d>=16)switch(c){case 0:return a(2,b,d-16);case 1:return a(4,d-16,15-b);case 2:return a(4,b,d-16);case 3:return a(4,31-d,b);case 4:return a(5,b,d-16);case 5:return a(0,b,d-16);default:throw new RangeError;}switch(c){case 0:return new ia(b+16,d);case 1:return new ia(b,d+16);case 2:return new ia(b+16,d+16);case 3:return new ia(b+32,d+16);case 4:return new ia(b+16,d+32);case 5:return new ia(b+16,d+48);default:throw new RangeError;}}var c=ja.createElement("canvas");
c.width=c.height=64;var b=c.getContext("2d");this.getCanvasCoordinate=a;this.canvas=c;this.ctx=b},W=ja.getElementsByTagName("canvas")[0],g=F.createContext(W);g.attachShader.bind(g);var L=g.bindBuffer.bind(g),ea=g.bindTexture.bind(g),ta=g.bufferData.bind(g),Cb=g.clear.bind(g),Sb=g.clearColor.bind(g);g.compileShader.bind(g);var ua=g.createBuffer.bind(g);g.createProgram.bind(g);g.createShader.bind(g);var Lb=g.createTexture.bind(g),Bb=g.disable.bind(g),ra=g.drawArrays.bind(g),Qa=g.enable.bind(g),O=g.enableVertexAttribArray.bind(g),
K=g.getAttribLocation.bind(g);g.getProgramInfoLog.bind(g);g.getShaderInfoLog.bind(g);var Q=g.getUniformLocation.bind(g),Tb=g.lineWidth.bind(g);g.linkProgram.bind(g);var Fb=g.pixelStorei.bind(g);g.shaderSource.bind(g);var Hb=g.texImage2D.bind(g),hb=g.texParameteri.bind(g),ya=g.uniform1i.bind(g),qa=g.uniformMatrix4fv.bind(g),pa=g.useProgram.bind(g),M=g.vertexAttribPointer.bind(g),Ub=g.viewport.bind(g),na=new function(a){var c=this,b=0,f=0,e=0,g=0,h=0;a.onmousedown=function(){switch(b){case 0:b=1;break;
case 2:c.poke=false;b=0}};a.onmouseup=a.onmouseout=U.onblur=function(){switch(b){case 1:c.poke=true;b=2;break;case 2:case 3:c.drag=c.poke=false;b=0}};a.onmousemove=function(a){f=g;e=h;g=a.clientX;h=a.clientY;switch(b){case 1:var a=f-g,q=e-h;if(Math.sqrt(a*a+q*q)>3){c.dragDirection.x=a;c.dragDirection.y=q;c.drag=true;b=3}break;case 2:c.poke=false;b=0;break;case 3:a=f-g;q=e-h;c.dragDirection.x=a;c.dragDirection.y=q}};c.update=function(){switch(b){case 2:c.poke=false;b=0}};c.drag=false;c.poke=false;
c.dragDirection={x:0,y:0}}(W),fa,Vb=W.width/W.height,Ha=0.1*Math.tan(60*Math.PI/360),Xa=Ha*Vb,vb=-Xa,wb=-Ha,y=void 0,y=va(),xb=Xa-vb,yb=Ha-wb;y[0]=0.2/xb;y[1]=0;y[2]=0;y[3]=0;y[4]=0;y[5]=0.2/yb;y[6]=0;y[7]=0;y[8]=(Xa+vb)/xb;y[9]=(Ha+wb)/yb;y[10]=-1000.1/999.9;y[11]=-1;y[12]=0;y[13]=0;y[14]=-200/999.9;y[15]=0;fa=y;var I=s(),J=s(),wa=s([0,1,0]),da=Za(),Z=va(),Aa=null,Pa=null,Wb=s([1,0,0]),Xb=s([0,1,0]),Yb=s([0,0,1]);s([0,0,0]);s([1,0,0]);s([0,1,0]);s([0,0,1]);s([0,0,-1]);s([0,-1,0]);s([-1,0,0]);var Sa=
[],Ba=s(),db,Zb=s([-1,0,0]),$b=s([0,-1,0]),ac=s([0,0,-1]),zb=[Wb,Zb,Xb,$b,Yb,ac],Ya=s(),Ia=s();db=function(a){ma(a,Ya);La(Ya);for(var a=99999,c=-1,b=0;b!==6;b++){var f=Ya,e=zb[b],g=Ia;if(!g||f===g){f[0]=f[0]-e[0];f[1]=f[1]-e[1];f[2]=f[2]-e[2]}else{g[0]=f[0]-e[0];g[1]=f[1]-e[1];g[2]=f[2]-e[2]}f=Ia[0];e=Ia[1];g=Ia[2];f=Math.sqrt(f*f+e*e+g*g);if(a>f){a=f;c=b}}return zb[[1,0,3,2,5,4][c]]};F.loadmanager.loadFiles({files:"cube.obj sphere.obj diffuse.shader cube.png skybox.obj border.shader goal.obj".split(" "),
update:function(){},error:function(){},finished:function(a){S=a["cube.obj"];$=a["skybox.obj"];aa=a["sphere.obj"];ba=a["goal.obj"];oa=F.shader.compileProgram(g,a["diffuse.shader"]);eb=F.shader.compileProgram(g,a["border.shader"]);Aa=jb(a["cube.png"]);Pa=jb(E.canvas);for(var c=new Int32Array(10),b=new Int32Array(10),e=new Int32Array(10),h=new Int32Array(10),a=0;a!==10;a++){c[a]=Math.random()*16|0;b[a]=Math.random()*16|0;e[a]=Math.random()*2|0;h[a]=Math.random()*6|0}setInterval(function(){E.ctx.beginPath();
E.ctx.fillStyle="#000000";E.ctx.globalAlpha=0.2;E.ctx.rect(0,0,64,64);E.ctx.fill();E.ctx.globalAlpha=1;for(var a=0;a!==10;a++){var g=e[a],k=E.getCanvasCoordinate(h[a],c[a],b[a]);E.ctx.beginPath();E.ctx.fillStyle="#FF0000";E.ctx.rect(k.x,k.y,1,1);E.ctx.fill();g?c[a]++:b[a]++}fb(E.canvas,Pa)},100);var a=65535*Math.random()&65535,y=function(a,c,b){var d=b[0],e=b[1],b=b[2];return d<0||e<0||b<0||d>=c||e>=c||b>=c?-1:a[d][e][b]},v=function(a,b,c){if(c===0)return a;var d=v,e=k[b],a=a.slice(0);a[0]=a[0]+e[0];
a[1]=a[1]+e[1];a[2]=a[2]+e[2];return d(a,b,c-1)},A=function(a,b,c,d,e){if(e<2)return true;c=v(c,d,1);return y(a,b,c)!==0?false:A(a,b,c,d,e-1)},q=function(a,b,c,d,e,f,g,h,i){var k=c===1&&i?3:1,j=a.next()%6,l=3+a.next()%(h-3);if(c===0)return true;if(d>=o)return false;if(j===e||j===(e===-1?-1:[1,0,3,2,5,4][e]))return q(a,b,c,d,e,f,g,h,i);if(!A(g,h,b,j,l))return q(a,b,c,d+1,e,f,g,h,i);var p=v(b,j,l);if(y(g,h,p)===-1)return q(a,b,c,d+1,e,f,g,h,i);g[p[0]][p[1]][p[2]]=k;b=v(b,j,l-1);f.push(b);return q(a,
b,c-1,0,j===-1?-1:[1,0,3,2,5,4][j],f,g,h,i)},p=function(a){for(var b=new Ab(a),c=5+b.next()%4,d=[8,8,8],e=[],f=16;f--;){e[f]=[];for(var g=16;g--;){e[f][g]=[];for(var h=16;h--;)e[f][g][h]=0}}e[d[0]][d[1]][d[2]]=2;f=[];g=q(b,d,c,0,-1,f,e,16,true);h=[];g&&q(b,f[b.next()%f.length],c,0,-1,h,e,16,false);return g?{startingPosition:{x:d[0],y:d[0],z:d[0]},getObject:function(a,b,c){return y(e,16,[a,b,c])},path:f}:p(a+1)},o=16,k=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]];C=p(a);for(a=0;a!==16;a++)for(var l=
0;l!==16;l++)for(var j=0;j!==16;j++){var t=C.getObject(a,l,j);if(t===1)Sa.push({vector:s([a,l,j])});else if(t===3){Ba[0]=a;Ba[1]=l;Ba[2]=j}}J[0]=C.startingPosition.x;J[1]=C.startingPosition.x;J[2]=C.startingPosition.x;xa=new tb({x:J[0],y:J[1],z:J[2]},C);ma(J,I);I[0]=0;I[1]=0;I[2]=20;Qa(Na);Qa(2884);Tb(4.5);Sb(0,0,0,0);Ub(0,0,W.width,W.height);Ra=ua();L(B,Ra);ta(B,S.rawData,35044);Ta=ua();L(B,Ta);ta(B,aa.rawData,35044);Oa=ua();L(B,Oa);ta(B,$.rawData,35044);Ua=ua();L(B,Ua);ta(B,ba.rawData,35044);a=
new Float32Array(3*C.path.length);l=0;a[l++]=C.startingPosition.x;a[l++]=C.startingPosition.y;a[l++]=C.startingPosition.z;for(j=0;j!==C.path.length;j++){a[l++]=C.path[j][0];a[l++]=C.path[j][1];a[l++]=C.path[j][2]}pathBuffer=ua();L(B,pathBuffer);ta(B,a,35044);Ma();F.requestGameFrame(cb);a=(new G.SoundEffect({oldParams:true,wave_type:0,p_env_attack:-0.031099240445367497,p_env_sustain:0.7635753833033847,p_env_punch:0.2816417110611466,p_env_decay:-0.6867234703619033,p_base_freq:-0.05417757730129136,p_freq_limit:0,
p_freq_ramp:0.366020674391696,p_freq_dramp:0.061304970543220046,p_vib_strength:-0.13391388831049597,p_vib_speed:-0.08958338294178247,p_arp_mod:0.7950661345385015,p_arp_speed:0.5519341775216162,p_duty:0.6044134241528809,p_duty_ramp:0.8909097971481785,p_repeat_speed:0.2607004144228995,p_pha_offset:-1.8430166566930404E-4,p_pha_ramp:0.8547329901213455,p_lpf_freq:0.9224470124042238,p_lpf_ramp:0.007261712532774577,p_lpf_resonance:0.8195562218315899,p_hpf_freq:2.3264287110167006E-7,p_hpf_ramp:-0.6950668630055059,
sound_vol:0.25,sample_rate:44100,sample_size:8})).generate();(new Audio).src=a.dataURI}})}(document,this);