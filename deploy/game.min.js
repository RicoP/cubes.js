!function(e,t){function Ps(n,r,i){function N(e){return e.touches?e.touches.length:1}function C(n){n=n||t.event;if(!T){var r=e,i=r.body;return[{x:n.pageX||n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&r.clientLeft||0),y:n.pageY||n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&r.clientTop||0)}]}var s=[],o,u=n.touches.length>0?n.touches:n.changedTouches;for(var a=0,f=u.length;a<f;a++)o=u[a],s.push({x:o.pageX,y:o.pageY});return s}function k(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function L(e,t){if(e.length==2&&t.length==2){var n,r;n=e[0].x-e[1].x,r=e[0].y-e[1].y;var i=Math.sqrt(n*n+r*r);n=t[0].x-t[1].x,r=t[0].y-t[1].y;var s=Math.sqrt(n*n+r*r);return s/i}return 0}function A(e,t){if(e.length==2&&t.length==2){var n,r;n=e[0].x-e[1].x,r=e[0].y-e[1].y;var i=Math.atan2(r,n)*180/Math.PI;n=t[0].x-t[1].x,r=t[0].y-t[1].y;var s=Math.atan2(r,n)*180/Math.PI;return s-i}return 0}function O(e,t){t.touches=C(t.originalEvent),t.type=e,j(s["on"+e])&&s["on"+e].call(s,t)}function M(e){e=e||t.event,e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function _(){l={},h=!1,c=0,u=0,a=0,p=null}function P(i){switch(i.type){case"mousedown":case"touchstart":l.start=C(i),v=(new Date).getTime(),c=N(i),h=!0,E=i;var s=n.getBoundingClientRect(),o=n.clientTop||e.body.clientTop||0,m=n.clientLeft||e.body.clientLeft||0,g=t.pageYOffset||n.scrollTop||e.body.scrollTop,y=t.pageXOffset||n.scrollLeft||e.body.scrollLeft;b={top:s.top+g-o,left:s.left+y-m},w=!0,D.hold(i),r.prevent_default&&M(i);break;case"mousemove":case"touchmove":if(!w)return!1;S=i,l.move=C(i),D.transform(i)||D.drag(i);break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":if(!w||p!="transform"&&i.touches&&i.touches.length>0)return!1;w=!1,x=i;var T=p=="drag";D.swipe(i),T?O("dragend",{originalEvent:i,direction:f,distance:u,angle:a}):p=="transform"?O("transformend",{originalEvent:i,position:l.center,scale:L(l.start,l.move),rotation:A(l.start,l.move)}):D.tap(E),d=p,O("release",{originalEvent:i,gesture:p}),_()}}function H(e,n){!n&&t.event&&t.event.toElement&&(n=t.event.toElement);if(e===n)return!0;if(n){var r=n.parentNode;while(r!==null){if(r===e)return!0;r=r.parentNode}}return!1}function B(e,t){var n={};if(!t)return e;for(var r in e)r in t?n[r]=t[r]:n[r]=e[r];return n}function j(e){return Object.prototype.toString.call(e)=="[object Function]"}function F(t,n,r){n=n.split(" ");for(var i=0,s=n.length;i<s;i++)t.addEventListener?t.addEventListener(n[i],r,!1):e.attachEvent&&t.attachEvent("on"+n[i],r)}var s=this,o={prevent_default:!1,css_hacks:!0,swipe:!0,swipe_time:200,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:20,transform:!0,scale_treshold:.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!0,hold_timeout:500};r=B(o,r),function(){if(!r.css_hacks)return!1;var e=["webkit","moz","ms","o",""],t={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"},i="";for(var s=0;s<e.length;s++)for(var o in t)i=o,e[s]&&(i=e[s]+i.substring(0,1).toUpperCase()+i.substring(1)),n.style[i]=t[o]}();var u=0,a=0,f=0,l={},c=0,h=!1,p=null,d=null,v=null,m={x:0,y:0},g=null,y=null,b={},w=!1,E,S,x,T="ontouchstart"in t;this.option=function(e,t){return t!=i&&(r[e]=t),r[e]},this.getDirectionFromAngle=function(e){var t={down:e>=45&&e<135,left:e>=135||e<=-135,up:e<-45&&e>-135,right:e>=-45&&e<=45},n,r;for(r in t)if(t[r]){n=r;break}return n};var D={hold:function(e){r.hold&&(p="hold",clearTimeout(y),y=setTimeout(function(){p=="hold"&&O("hold",{originalEvent:e,position:l.start})},r.hold_timeout))},swipe:function(e){if(!l.move)return;var t=l.move[0].x-l.start[0].x,n=l.move[0].y-l.start[0].y;u=Math.sqrt(t*t+n*n);var i=(new Date).getTime(),o=i-v;if(r.swipe&&r.swipe_time>o&&u>r.swipe_min_distance){a=k(l.start[0],l.move[0]),f=s.getDirectionFromAngle(a),p="swipe";var c={x:l.move[0].x-b.left,y:l.move[0].y-b.top},h={originalEvent:e,position:c,direction:f,distance:u,distanceX:t,distanceY:n,angle:a};O("swipe",h)}},drag:function(e){var t=l.move[0].x-l.start[0].x,n=l.move[0].y-l.start[0].y;u=Math.sqrt(t*t+n*n);if(r.drag&&u>r.drag_min_distance||p=="drag"){a=k(l.start[0],l.move[0]),f=s.getDirectionFromAngle(a);var i=f=="up"||f=="down";if((i&&!r.drag_vertical||!i&&!r.drag_horizontal)&&u>r.drag_min_distance)return;p="drag";var o={x:l.move[0].x-b.left,y:l.move[0].y-b.top},c={originalEvent:e,position:o,direction:f,distance:u,distanceX:t,distanceY:n,angle:a};h&&(O("dragstart",c),h=!1),O("drag",c),M(e)}},transform:function(e){if(r.transform){if(N(e)!=2)return!1;var t=A(l.start,l.move),n=L(l.start,l.move);if(p!="drag"&&(p=="transform"||Math.abs(1-n)>r.scale_treshold||Math.abs(t)>r.rotation_treshold)){p="transform",l.center={x:(l.move[0].x+l.move[1].x)/2-b.left,y:(l.move[0].y+l.move[1].y)/2-b.top};var i={originalEvent:e,position:l.center,scale:n,rotation:t};return h&&(O("transformstart",i),h=!1),O("transform",i),M(e),!0}}return!1},tap:function(e){var t=(new Date).getTime(),n=t-v;if(r.hold&&!(r.hold&&r.hold_timeout>n))return;var i=function(){if(m&&r.tap_double&&d=="tap"&&v-g<r.tap_max_interval){var e=Math.abs(m[0].x-l.start[0].x),t=Math.abs(m[0].y-l.start[0].y);return m&&l.start&&Math.max(e,t)<r.tap_double_distance}return!1}();if(i)p="double_tap",g=null,O("doubletap",{originalEvent:e,position:l.start}),M(e);else{var s=l.move?Math.abs(l.move[0].x-l.start[0].x):0,o=l.move?Math.abs(l.move[0].y-l.start[0].y):0;u=Math.max(s,o),u<r.tap_max_distance&&(p="tap",g=t,m=l.start,r.tap&&(O("tap",{originalEvent:e,position:l.start}),M(e)))}}};T?F(n,"touchstart touchmove touchend touchcancel",P):(F(n,"mouseup mousedown mousemove",P),F(n,"mouseout",function(e){H(n,e.relatedTarget)||P(e)}))}function Bs(e){var t=new Hs(16);return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function js(e){return e||(e=Bs()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fs(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],b=t[0],w=t[1],E=t[2],S=t[3];return n[0]=b*r+w*u+E*c+S*v,n[1]=b*i+w*a+E*h+S*m,n[2]=b*s+w*f+E*p+S*g,n[3]=b*o+w*l+E*d+S*y,b=t[4],w=t[5],E=t[6],S=t[7],n[4]=b*r+w*u+E*c+S*v,n[5]=b*i+w*a+E*h+S*m,n[6]=b*s+w*f+E*p+S*g,n[7]=b*o+w*l+E*d+S*y,b=t[8],w=t[9],E=t[10],S=t[11],n[8]=b*r+w*u+E*c+S*v,n[9]=b*i+w*a+E*h+S*m,n[10]=b*s+w*f+E*p+S*g,n[11]=b*o+w*l+E*d+S*y,b=t[12],w=t[13],E=t[14],S=t[15],n[12]=b*r+w*u+E*c+S*v,n[13]=b*i+w*a+E*h+S*m,n[14]=b*s+w*f+E*p+S*g,n[15]=b*o+w*l+E*d+S*y,n}function Is(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2];return n[0]=e[0]*r+e[4]*i+e[8]*s+e[12],n[1]=e[1]*r+e[5]*i+e[9]*s+e[13],n[2]=e[2]*r+e[6]*i+e[10]*s+e[14],n}function qs(e,t,n){var r=t[0],i=t[1],s=t[2],o,u,a,f,l,c,h,p,d,v,m,g;return!n||e===n?(e[12]=e[0]*r+e[4]*i+e[8]*s+e[12],e[13]=e[1]*r+e[5]*i+e[9]*s+e[13],e[14]=e[2]*r+e[6]*i+e[10]*s+e[14],e[15]=e[3]*r+e[7]*i+e[11]*s+e[15],e):(o=e[0],u=e[1],a=e[2],f=e[3],l=e[4],c=e[5],h=e[6],p=e[7],d=e[8],v=e[9],m=e[10],g=e[11],n[0]=o,n[1]=u,n[2]=a,n[3]=f,n[4]=l,n[5]=c,n[6]=h,n[7]=p,n[8]=d,n[9]=v,n[10]=m,n[11]=g,n[12]=o*r+l*i+d*s+e[12],n[13]=u*r+c*i+v*s+e[13],n[14]=a*r+h*i+m*s+e[14],n[15]=f*r+p*i+g*s+e[15],n)}function Rs(e,t,n,r,i,s,o){o||(o=Bs());var u=t-e,a=r-n,f=s-i;return o[0]=i*2/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i*2/a,o[6]=0,o[7]=0,o[8]=(t+e)/u,o[9]=(r+n)/a,o[10]=-(s+i)/f,o[11]=-1,o[12]=0,o[13]=0,o[14]=-(s*i*2)/f,o[15]=0,o}function Us(e,t,n,r,i){var s=n*Math.tan(e*Math.PI/360),o=s*t;return Rs(-o,o,-s,s,n,r,i)}function zs(e,t,n,r){r||(r=Bs());var i,s,o,u,a,f,l,c,h,p,d=e[0],v=e[1],m=e[2],g=n[0],y=n[1],b=n[2],w=t[0],E=t[1],S=t[2];return d===w&&v===E&&m===S?js(r):(l=d-w,c=v-E,h=m-S,p=1/Math.sqrt(l*l+c*c+h*h),l*=p,c*=p,h*=p,i=y*h-b*c,s=b*l-g*h,o=g*c-y*l,p=Math.sqrt(i*i+s*s+o*o),p?(p=1/p,i*=p,s*=p,o*=p):(i=0,s=0,o=0),u=c*o-h*s,a=h*i-l*o,f=l*s-c*i,p=Math.sqrt(u*u+a*a+f*f),p?(p=1/p,u*=p,a*=p,f*=p):(u=0,a=0,f=0),r[0]=i,r[1]=u,r[2]=l,r[3]=0,r[4]=s,r[5]=a,r[6]=c,r[7]=0,r[8]=o,r[9]=f,r[10]=h,r[11]=0,r[12]=-(i*d+s*v+o*m),r[13]=-(u*d+a*v+f*m),r[14]=-(l*d+c*v+h*m),r[15]=1,r)}function Ws(e,t,n){return!n||e===n?(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e):(n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n)}function Xs(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Vs(e){var t=new Hs(3);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):t[0]=t[1]=t[2]=0,t}function $s(e,t,n){return!n||e===n?(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e):(n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n)}function Js(e,t,n){return!n||e===n?(e[0]*=t,e[1]*=t,e[2]*=t,e):(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n)}function Ks(e,t){t||(t=e);var n=e[0],r=e[1],i=e[2],s=Math.sqrt(n*n+r*r+i*i);return s?s===1?(t[0]=n,t[1]=r,t[2]=i,t):(s=1/s,t[0]=n*s,t[1]=r*s,t[2]=i*s,t):(t[0]=0,t[1]=0,t[2]=0,t)}function Qs(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2];return n[0]=i*a-s*u,n[1]=s*o-r*a,n[2]=r*u-i*o,n}function Gs(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Ys(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2],o=e[0],u=e[1],a=e[2],f=e[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return n[0]=l*f+p*-o+c*-a-h*-u,n[1]=c*f+p*-u+h*-o-l*-a,n[2]=h*f+p*-a+l*-u-c*-o,n}function Zs(e,t,n){n||(n=new Hs(4));var r=e*.5,i=Math.sin(r);return n[3]=Math.cos(r),n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n}function to(e){"use strict";var t=65535,n=new Uint32Array(4096),r=362436,i=2654435769;n[0]=e,n[1]=e+i,n[2]=e+i+i;for(var s=3;s<4096;s++)n[s]=n[s-3]^n[s-2]^i^s;var o=4095;this.next=function(){var e,i=18782,s,u=4294967294;o=o+1&4095,e=i*n[o]+r,r=e>>32,s=e+r,s<r&&(s++,r++);var a=n[o]=u-s;return a<0?-a%t:a%t}}function Uo(){var e=To;$s(Eo,wo,e),zs(e,Eo,So,xo)}function zo(e){var t=Zs(e,So);Ys(t,wo),Uo()}function Wo(e){var t=To,n=Ks(Qs(So,wo,t)),r=Zs(e,n);Ys(r,wo),Ks(Qs(wo,n,So)),Uo()}function Xo(){yo.enable(nt),yo.enable(Y),yo.lineWidth(4.5),yo.clearColor(0,0,0,0),yo.viewport(0,0,go.width,go.height),lo=yo.createBuffer(),yo.bindBuffer(F,lo),yo.bufferData(F,io.rawData,z),co=yo.createBuffer(),yo.bindBuffer(F,co),yo.bufferData(F,so.rawData,z),ho=yo.createBuffer(),yo.bindBuffer(F,ho),yo.bufferData(F,uo.rawData,z);var e=new Float32Array(3*vo.path.length),t=0;e[t++]=vo.startingPosition.x,e[t++]=vo.startingPosition.y,e[t++]=vo.startingPosition.z;for(var n=0;n!==vo.path.length;n++)e[t++]=vo.path[n].x,e[t++]=vo.path[n].y,e[t++]=vo.path[n].z;pathBuffer=yo.createBuffer(),yo.bindBuffer(F,pathBuffer),yo.bufferData(F,e,z);var r=new Ps(go);r.ontap=function(e){jo=!0,Fo=e;var t=e.position[0].x,n=go.height-e.position[0].y;Ro.x=t,Ro.y=n},r.ondrag=function(e){Io=!0,qo=e;var t=e.position.x,n=go.height-e.position.y;Ro.x=t,Ro.y=n}}function Vo(e){Jo(e),Ko(e),Ds.requestGameFrame(Vo)}function Jo(e){var t=0,n=0,r=0,i=0,s=0,o=0,u=!1,a=!1;if(jo){var f=$o(wo);oo.tap(e,f)}if(Io){var l=qo.distanceX*2*Math.PI/go.width/-20,c=qo.distanceY*2*Math.PI/go.height/20;zo(l),Wo(c)}jo=!1,Io=!1,oo.tick(e)}function Ko(e){yo.disable(nt),Yo(ao),yo.enable(nt),yo.clear(n),Qo(ao),Go(ao),Zo(fo,vo.path)}function Qo(e){yo.useProgram(e);var t=yo.getUniformLocation(e,"uModelviewprojection"),n=yo.getUniformLocation(e,"uTexture"),r=yo.getAttribLocation(e,"aVertex"),i=yo.getAttribLocation(e,"aTextureuv"),s=yo.getAttribLocation(e,"aNormal"),o=To;yo.bindBuffer(F,lo),yo.vertexAttribPointer(r,4,bn,!1,io.stride,io.voffset),yo.enableVertexAttribArray(r),i!==-1&&(yo.vertexAttribPointer(i,4,bn,!1,io.stride,io.toffset),yo.enableVertexAttribArray(i)),s!==-1&&(yo.vertexAttribPointer(s,4,bn,!1,io.stride,io.noffset),yo.enableVertexAttribArray(s)),n&&(yo.bindTexture(G,No),yo.uniform1i(n,0));for(var u=0;u!=Ho.length;u++){var a=Ho[u];Fs(bo,xo,o),qs(o,a.vector),yo.uniformMatrix4fv(t,!1,o),yo.drawArrays(f,0,io.numVertices)}}function Go(e){yo.useProgram(e);var t=yo.getUniformLocation(e,"uModelviewprojection"),n=yo.getUniformLocation(e,"uTexture"),r=yo.getAttribLocation(e,"aVertex"),i=yo.getAttribLocation(e,"aTextureuv"),s=To;yo.bindBuffer(F,co),yo.vertexAttribPointer(r,4,bn,!1,so.stride,so.voffset),yo.enableVertexAttribArray(r),i!==-1&&(yo.vertexAttribPointer(i,4,bn,!1,so.stride,so.toffset),yo.enableVertexAttribArray(i)),n&&(yo.bindTexture(G,No),yo.uniform1i(n,0)),Fs(bo,xo,s),qs(s,oo.position),yo.uniformMatrix4fv(t,!1,s),yo.drawArrays(f,0,so.numVertices)}function Yo(e){yo.useProgram(e);var t=yo.getUniformLocation(e,"uModelviewprojection"),n=yo.getUniformLocation(e,"uTexture"),r=yo.getAttribLocation(e,"aVertex"),i=yo.getAttribLocation(e,"aTextureuv"),s=To;yo.bindBuffer(F,ho),yo.vertexAttribPointer(r,4,bn,!1,uo.stride,uo.voffset),yo.enableVertexAttribArray(r),yo.vertexAttribPointer(i,4,bn,!1,uo.stride,uo.toffset),yo.enableVertexAttribArray(i),yo.bindTexture(G,Co),yo.uniform1i(n,0),Fs(bo,xo,s),qs(s,Eo),qs(s,wo),yo.uniformMatrix4fv(t,!1,s),yo.drawArrays(f,0,uo.numVertices)}function Zo(e,t){yo.useProgram(e);var n=yo.getAttribLocation(e,"aVertex"),r=yo.getUniformLocation(e,"uModelviewprojection"),i=To;yo.bindBuffer(F,pathBuffer),yo.vertexAttribPointer(n,3,bn,!1,0,0),yo.enableVertexAttribArray(n),Fs(bo,xo,i),yo.uniformMatrix4fv(r,!1,i);for(var s=0;s!==vo.path.length-1;s++)yo.drawArrays(o,s,2)}function eu(e,t){yo.bindTexture(yo.TEXTURE_2D,t),yo.pixelStorei(yo.UNPACK_FLIP_Y_WEBGL,!0),yo.texImage2D(yo.TEXTURE_2D,0,yo.RGBA,yo.RGBA,yo.UNSIGNED_BYTE,e),yo.texParameteri(yo.TEXTURE_2D,yo.TEXTURE_MAG_FILTER,yo.NEAREST),yo.texParameteri(yo.TEXTURE_2D,yo.TEXTURE_MIN_FILTER,yo.NEAREST)}function tu(e){var t=yo.createTexture();return eu(e,t),yo.bindTexture(G,null),t}var n=256,r=1024,i=16384,s=0,o=1,u=2,a=3,f=4,l=5,c=6,h=0,p=1,d=768,v=769,m=770,g=771,y=772,b=773,w=774,E=775,S=776,x=32774,T=32777,N=32777,C=34877,k=32778,L=32779,A=32968,O=32969,M=32970,_=32971,D=32769,P=32770,H=32771,B=32772,j=32773,F=34962,I=34963,q=34964,R=34965,U=35040,z=35044,W=35048,X=34660,V=34661,$=34342,J=1028,K=1029,Q=1032,G=3553,Y=2884,Z=3042,et=3024,tt=2960,nt=2929,rt=3089,it=32823,st=32926,ot=32928,ut=0,at=1280,ft=1281,lt=1282,ct=1285,ht=2304,pt=2305,dt=2849,vt=33901,mt=33902,gt=2885,yt=2886,bt=2928,wt=2930,Et=2931,St=2932,xt=2961,Tt=2962,Nt=2964,Ct=2965,kt=2966,Lt=2967,At=2963,Ot=2968,Mt=34816,_t=34817,Dt=34818,Pt=34819,Ht=36003,Bt=36004,jt=36005,Ft=2978,It=3088,qt=3106,Rt=3107,Ut=3317,zt=3333,Wt=3379,Xt=3386,Vt=3408,$t=3410,Jt=3411,Kt=3412,Qt=3413,Gt=3414,Yt=3415,Zt=10752,en=32824,tn=32873,nn=32936,rn=32937,sn=32938,on=32939,un=34466,an=34467,fn=4352,ln=4353,cn=4354,hn=33170,pn=5120,dn=5121,vn=5122,mn=5123,gn=5124,yn=5125,bn=5126,wn=6402,En=6406,Sn=6407,xn=6408,Tn=6409,Nn=6410,Cn=32819,kn=32820,Ln=33635,An=35632,On=35633,Mn=34921,_n=36347,Dn=36348,Pn=35661,Hn=35660,Bn=34930,jn=36349,Fn=35663,In=35712,qn=35714,Rn=35715,Un=35717,zn=35718,Wn=35719,Xn=35721,Vn=35722,$n=35724,Jn=35725,Kn=512,Qn=513,Gn=514,Yn=515,Zn=516,er=517,tr=518,nr=519,rr=7680,ir=7681,sr=7682,or=7683,ur=5386,ar=34055,fr=34056,lr=7936,cr=7937,hr=7938,pr=9728,dr=9729,vr=9984,mr=9985,gr=9986,yr=9987,br=10240,wr=10241,Er=10242,Sr=10243,xr=5890,Tr=34067,Nr=34068,Cr=34069,kr=34070,Lr=34071,Ar=34072,Or=34073,Mr=34074,_r=34076,Dr=33984,Pr=33985,Hr=33986,Br=33987,jr=33988,Fr=33989,Ir=33990,qr=33991,Rr=33992,Ur=33993,zr=33994,Wr=33995,Xr=33996,Vr=33997,$r=33998,Jr=33999,Kr=34e3,Qr=34001,Gr=34002,Yr=34003,Zr=34004,ei=34005,ti=34006,ni=34007,ri=34008,ii=34009,si=34010,oi=34011,ui=34012,ai=34013,fi=34014,li=34015,ci=34016,hi=10497,pi=33071,di=33648,vi=35664,mi=35665,gi=35666,yi=35667,bi=35668,wi=35669,Ei=35670,Si=35671,xi=35672,Ti=35673,Ni=35674,Ci=35675,ki=35676,Li=35678,Ai=35680,Oi=34338,Mi=34339,_i=34340,Di=34341,Pi=34922,Hi=34373,Bi=34975,ji=35713,Fi=35716,Ii=35720,qi=36336,Ri=36337,Ui=36338,zi=36339,Wi=36340,Xi=36341,Vi=36160,$i=36161,Ji=32854,Ki=32855,Qi=36194,Gi=33189,Yi=6401,Zi=36168,es=34041,ts=36162,ns=36163,rs=36164,is=36176,ss=36177,os=36178,us=36179,as=36180,fs=36181,ls=36048,cs=36049,hs=36050,ps=36051,ds=36064,vs=36096,ms=36128,gs=33306,ys=0,bs=36053,ws=36054,Es=36055,Ss=36057,xs=36061,Ts=36006,Ns=36007,Cs=34024,ks=1286,Ls=37440,As=37441,Os=37442,Ms=37443,_s=37444,Ds={};(function(e){"use strict";function n(e){var n,r,i;for(n=0;r=t[n++];){i=e.getContext(r,{alpha:!1,preserveDrawingBuffer:!0});if(i)return i}return null}var t=["experimental-webgl","webgl","moz-webgl","webkit-3d"];e.createContext=n})(Ds),function(n){"use strict";function o(){for(var e=0;e!==r;e++)s[e]=0,i[e]=0}function u(){for(var e=0;e!==r;e++)s[e]=i[e]}function a(e){return i[e]!==0}function f(e){return i[e]===0}function l(e){return i[e]!==0&&s[e]===0}function c(e){return i[e]===0&&s[e]!==0}var r=256,i=new Uint8Array(r),s=new Uint8Array(r);o(),e.addEventListener("keydown",function(e){var t=e.keyCode;t<r&&(i[t]=1)},!1),e.addEventListener("keyup",function(e){var t=e.keyCode;t<r&&(i[t]=0)},!1),t.addEventListener("blur",function(){o()},!1);var h={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,windowKeyLeft:91,windowKeyRight:92,select:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equals:187,comma:188,dash:189,period:190,slash:191,graveAccent:192,openBracket:219,backSlash:220,closeBraket:221,quote:222};n.keys={codes:h,update:u,isDown:a,isUp:f,wasPressed:l,wasReleased:c}}(Ds),function(e){"use strict";function u(){i=-1,o.total=0,o.frame=0}function a(t){function n(){var n=Date.now();i===-1&&(s=n,i=n,o.frame=0);var r=(n-s)/1e3;o.delta=r,o.total+=r,t(o),o.frame++,s=n,e.keys.update()}r(n)}var n,r,i,s,o;n=t,r=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(e){n.setTimeout(e,16)},i=-1,s=0,o={total:0,delta:0,frame:0,reset:u},e.requestGameFrame=a}(Ds),function(e){"use strict";function u(e){var u=e.split("\n"),a="",f=0,l=[],c=[],h=[],p=[],d=[],v=[],m=0,g={v:function(e){if(!e||e.length!=3)throw new Error("Can't accept Vertic without 3 components. LINE:"+a);var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]);l.push(t,n,r)},vn:function(e){if(!e||e.length!=3)throw new Error("Can't accept Normal without 3 components. LINE:"+f);var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]);c.push(t,n,r)},vt:function(e){if(!e||e.length<2)throw new Error("Can't accept Texture with less than 2 components. LINE:"+f);var t=Number(e[0]),n=Number(e[1]);h.push(t,n)},f:function D(e){if(!e||e.length<3)throw new Error("Can't accept Face with less than 3 components. LINE:"+f);if(e.length>3){for(var t=e.length-1;t!==1;t--)D([e[0],e[t-1],e[t]]);return}m++;for(var n=0;n!==3;n++){var r=e[n].split("/"),i=parseInt(r[0],10)-1,s=parseInt(r[1],10)-1,t=parseInt(r[2],10)-1;p.push(i),isNaN(s)||v.push(s),isNaN(t)||d.push(t)}}};for(f=0;f!=u.length;){a=u[f++].trim();var y=a.split(o),b=y.shift();b in g&&g[b](y)}var w=t;if(h.length!==0||v.length!==0){w|=r;if(p.length!==v.length)throw new Error("Texture indice don't match Vertic indice.")}if(c.length!==0||d.length!==0){w|=n;if(p.length!==d.length)throw new Error("Normal indice don't match Vertic indice.")}var E=0,S=0,x=0,T=0,N=0,C=0;switch(w){case t:N=4;break;case r:N=6,x=4*s;break;case n:N=8,T=4*s;break;case i:N=10,x=4*s,T=6*s;break;default:throw new Error("Schema broken.")}E=m*3*N;var k=new Float32Array(E),L=0,A=0,O=0,M=0;for(var _=0;_!=p.length;_++)A=3*p[_],k[L++]=l[A++],k[L++]=l[A++],k[L++]=l[A],k[L++]=1,w&r&&(O=2*v[_],k[L++]=h[O++],k[L++]=h[O]),w&n&&(M=3*d[_],k[L++]=c[M++],k[L++]=c[M++],k[L++]=c[M],k[L++]=0);return{stride:N*s,schema:w,voffset:S,toffset:x,noffset:T,rawData:k,numVertices:m*3}}var t=0,n=1,r=2,i=n|r,s=4,o=/[\t\r\n ]+/g;e.obj={},e.obj.parse=u,e.obj.SCHEMA_V=t,e.obj.SCHEMA_VN=n,e.obj.SCHEMA_VT=r,e.obj.SCHEMA_VTN=n|r}(Ds),function(e){"use strict";function t(e){return e=e.toLowerCase(),e==="application/json"?2:e==="text/html"?7:e.indexOf("javascript")!==-1?3:e.indexOf("xml")!==-1?4:e.indexOf("image")!==-1?5:1}function n(n,r,i,s){function o(){if(a)return;if(f.readyState===2||f.readyState===3){u=t(f.getResponseHeader("content-type")),r.toLowerCase().lastIndexOf(".json")+5===r.length?u=2:r.toLowerCase().lastIndexOf(".obj")+4===r.length&&(u=6);if(u===5){a=!0,f.abort();var o=new Image;o.onload=function(){i(n,o)},o.onerror=function(){s(r,"Loading image failed.")},o.src=r;return}}if(f.readyState===4){var l=f.status;if(l>=200&&l<=299||l===304||l===0)if(u===4)i(n,f.responseXML);else if(u===2)try{i(n,JSON.parse(f.responseText))}catch(c){s(r,c)}else if(u===6)try{i(n,e.obj.parse(f.responseText))}catch(c){s(r,c)}else i(n,f.responseText);else s(r,l||0)}}var u=0,a=!1,f=new XMLHttpRequest;f.onreadystatechange=o,f.open("GET",r,!0),f.send(null)}function r(){}function i(e){if(!e)throw new Error("Passed nothing in loadFiles");var t=e.files||{},i=e.update||r,s=e.finished||r,o=e.error||r,u=0,a=0,f=Object.create(null),l=function(e,t){a++,f[e]=t,i(e,a/u),a===u&&s(f)},c=function(e,t){l=r,c=r,o(e,t)};if(t instanceof Array){u=t.length;for(var h=0,p;p=t[h++];)n(p,p,l,c)}else{var d=Object.keys(t);u=d.length;for(var h=0,v;v=d[h++];)t.hasOwnProperty(v)&&n(v,t[v],l,c)}}e.loadmanager={},e.loadmanager.loadFiles=i}(Ds),function(e){"use strict";function t(e,t){var n=["#define VERTEX\n","#define FRAGMENT\n"],r="#line 0\n",i=[e.createShader(e.VERTEX_SHADER),e.createShader(e.FRAGMENT_SHADER)],s=e.createProgram(),o=null,u="";for(var a=0;a!=n.length;a++){o=i[a],e.shaderSource(o,n[a]+r+t),e.compileShader(o);if(u=e.getShaderInfoLog(o))throw new Error(u);e.attachShader(s,o)}return e.linkProgram(s),(u=e.getProgramInfoLog(s))&&console.error(u),s}e.shader={},e.shader.compileProgram=t}(Ds);var Hs=Float32Array,eo=function(){function t(t){"use strict";var n=2,r=0,i=Vs(),s=Vs(),o=0;this.tick=function(u){switch(r){case 0:break;case 1:$s(t.position,Js(i,u.delta*n,e)),o+=u.delta*n,o>=1&&(r=0,Xs($s(s,i,e),t.position),o=0);break;default:}},this.tap=function(e,n){switch(r){case 1:break;case 0:Xs(n,i),Xs(t.position,s),o=0,r=1;break;default:}}}var e=Vs();return function(e){this.position=Vs([e.x,e.y,e.z]);var n=new t(this);this.tap=function(e,t){n.tap(e,t)},this.tick=function(e){n.tick(e)}}}(),no;!function(){"use strict";function t(e,t){this.x=e,this.y=t,this.toString=function(){return"["+e+", "+t+"]"}}no=function(){function i(e,n,r){if(n<0)switch(e){case 0:return i(1,r,-n-1);case 1:return i(5,-n-1,15-r);case 2:return i(1,n+16,r);case 3:return i(2,n+16,r);case 4:return i(1,15-r,16+n);case 5:return i(1,-n-1,15-r);default:throw new RangeError}if(r<0)switch(e){case 0:return i(5,n,16+r);case 1:return i(0,-r-1,n);case 2:return i(0,n,16+r);case 3:return i(0,16+r,15-n);case 4:return i(2,n,16+r);case 5:return i(4,n,16+r);default:throw new RangeError}if(n>=16)switch(e){case 0:return i(3,15-r,n-16);case 1:return i(2,n-16,r);case 2:return i(3,n-16,r);case 3:return i(5,31-n,15-r);case 4:return i(3,r,31-n);case 5:return i(3,31-n,15-r);default:throw new RangeError}if(r>=16)switch(e){case 0:return i(2,n,r-16);case 1:return i(4,r-16,15-n);case 2:return i(4,n,r-16);case 3:return i(4,31-r,n);case 4:return i(5,n,r-16);case 5:return i(0,n,r-16);default:throw new RangeError}switch(e){case 0:return new t(n+16,r);case 1:return new t(n,r+16);case 2:return new t(n+16,r+16);case 3:return new t(n+32,r+16);case 4:return new t(n+16,r+32);case 5:return new t(n+16,r+48);default:throw new RangeError}}var n=e.createElement("canvas");n.width=n.height=64;var r=n.getContext("2d");this.getCanvasCoordinate=i,this.canvas=n,this.ctx=r}}();var ro={OUT_OF_BOUNDS:-1,AIR:0,CUBE:1,START:2,GOAL:3};ro.create=function(e,t){function p(){l=[];for(var e=t;e--;){l[e]=[];for(var n=t;n--;){l[e][n]=[];for(var r=t;r--;)l[e][n][r]=ro.AIR}}}function d(e,t,n,r){l[e][t][n]=r}function v(e,n,r){return e<0||n<0||r<0||e>=t||n>=t||r>=t?ro.OUT_OF_BOUNDS:l[e][n][r]}function m(e){return e===-1?-1:[1,0,3,2,5,4][e]}function g(e,t,n){var r=[e.x,e.y,e.z],i=f[t];for(var s=0;s<n;s++)r[0]+=i[0],r[1]+=i[1],r[2]+=i[2];return{x:r[0],y:r[1],z:r[2]}}function y(e,t,n){for(var r=1;r<n;r++){var i=g(e,t,r),s=v(i.x,i.y,i.z);if(s!==ro.AIR)return!1}return!0}function b(e,r,i,s,o){var u=i===1?ro.GOAL:ro.CUBE,a=e.next()%6,f=3+e.next()%(t-3);if(i===0)return!0;if(s>=n)return!1;if(a===o||a===m(o))return b(e,r,i,s,o);if(!y(r,a,f))return b(e,r,i,s+1,o);var l=g(r,a,f),c=v(l.x,l.y,l.z);if(c===ro.OUT_OF_BOUNDS)return b(e,r,i,s+1,o);d(l.x,l.y,l.z,u);var p=g(r,a,f-1);return h.push(p),b(e,p,i-1,0,m(a))}function w(e){var t,n=0;do t=new to(e++),p(),d(c.x,c.y,c.z,ro.START),n=5+t.next()%8;while(!b(t,c,n,0,-1))}var n=16,r=0,i=1,s=2,o=3,u=4,a=5,f=[];f[r]=[1,0,0],f[i]=[-1,0,0],f[s]=[0,1,0],f[o]=[0,-1,0],f[u]=[0,0,1],f[a]=[0,0,-1];var l,c={x:t/2|0,y:t/2|0,z:t/2|0},h=[];return w(e),{startingPosition:c,getObject:v,path:h}};var io,so,oo,uo,ao,fo,lo,co,ho,po,vo,mo=new no,go=e.getElementsByTagName("canvas")[0],yo=Ds.createContext(go),bo=Us(60,4/3,.1,1e3),wo=Vs(),Eo=Vs(),So=Vs([0,1,0]),xo=js(),To=Bs(),No=null,Co=null,ko=Vs([1,0,0]),Lo=Vs([0,1,0]),Ao=Vs([0,0,1]),Oo=0,Mo=0,_o=0,Do=[Vs([0,0,0]),Vs([1,0,0]),Vs([0,1,0]),Vs([0,0,1]),Vs([0,0,-1]),Vs([0,-1,0]),Vs([-1,0,0])],Po=[[0,0,0,0],[2,3,4,5],[0,0,0,0],[2,6,1,5],[2,1,6,5],[0,0,0,0],[2,4,3,5]],Ho=[],Bo=new Float32Array([-1,-1,1,-1,1,1,-1,1]),jo=!1,Fo=null,Io=!1,qo=null,Ro={x:0,y:0},$o=function(){var e=Vs([-1,0,0]),t=Vs([0,-1,0]),n=Vs([0,0,-1]),r=[ko,e,Lo,t,Ao,n],i=Vs(),s=Vs();return function(e){Xs(e,i),Ks(i);var t=99999,n=-1;for(var o=0;o!==6;o++){var u=r[o];Ws(i,u,s);var a=Gs(s);t>a&&(t=a,n=o)}return r[[1,0,3,2,5,4][n]]}}();Ds.loadmanager.loadFiles({files:["cube.obj","sphere.obj","diffuse.shader","cube.png","skybox3.obj","border.shader","map1.json"],error:function(e,t){},finished:function(e){io=e["cube.obj"],uo=e["skybox3.obj"],so=e["sphere.obj"],ao=Ds.shader.compileProgram(yo,e["diffuse.shader"]),fo=Ds.shader.compileProgram(yo,e["border.shader"]),No=tu(e["cube.png"]),Co=tu(mo.canvas);var t=10,n=new Int32Array(t),r=new Int32Array(t),i=new Int32Array(t),s=new Int32Array(t);for(var o=0;o!==t;o++)n[o]=Math.random()*16|0,r[o]=Math.random()*16|0,i[o]=Math.random()*2|0,s[o]=Math.random()*6|0;setInterval(function(){mo.ctx.beginPath(),mo.ctx.fillStyle="#000000",mo.ctx.globalAlpha=.2,mo.ctx.rect(0,0,64,64),mo.ctx.fill(),mo.ctx.globalAlpha=1;for(var e=0;e!==t;e++){var o=n[e],u=r[e],a=i[e],f=s[e],l=mo.getCanvasCoordinate(f,o,u);mo.ctx.beginPath(),mo.ctx.fillStyle="#FF0000",mo.ctx.rect(l.x,l.y,1,1),mo.ctx.fill(),a?n[e]++:r[e]++}eu(mo.canvas,Co)},100),vo=ro.create(49,16);for(var u=0;u!==16;u++)for(var a=0;a!==16;a++)for(var f=0;f!==16;f++){var l=vo.getObject(u,a,f);l===ro.CUBE&&Ho.push({vector:Vs([u,a,f])})}Eo[0]=8,Eo[1]=8,Eo[2]=8,oo=new eo({x:Eo[0],y:Eo[1],z:Eo[2]}),Xs(Eo,wo),wo[0]=0,wo[1]=0,wo[2]=20,Xo(),Uo(),Ds.requestGameFrame(Vo)}})}(document,this);